<html>
    <head>
        <meta http-equiv = "Content-Type" content = "text/html; charset=utf8">
        <title>WKWebView-Intercept</title>
        <script language = "javascript">
            
        //! JS调用OC的登录功能
        function login() {
            var token = "js_tokenStringForIntercept";
            loginSucceed(token);
        }
        //! JS登录成功后loadURL并传参token
        function loginSucceed(token) {
            var action = "loginSucceed";
            jsToOc(action, token);
        }
        //! JS调用OC入口
        function jsToOc(action, params) {
            var url = "jsToOc://" + action + "?" + params;
            alert(url)
            loadURL(url);
        }
        //! 加载URL
        function loadURL(url) {
            window.location.href = url;
        }
        
       
        //! 调用alert(message)
        function showAlert() {
            alert("js_alertMessage");
        }
        //! 调用confirm(message)
        function showConfirm() {
            confirm("js_confirmMessage");
        }
        //! 调用prompt(prompt, defaultMessage)
        function showPrompt() {
            prompt("js_prompt", "js_prompt_defaultMessage");
        }
        //! OC调用JS入口
        function ocToJs(action, params) {
            document.getElementById("returnValue").innerHTML = action + '?' + params;
            jsInvokeOC();
        }
        function jsInvokeOC() {
<!--            window.webkit.messageHandlers.<方法名>.postMessage(<消息内容>);-->
            window.webkit.messageHandlers.jsInvokeOCMethod.postMessage('我是Javascript消息内容');
        }
        function response2JS(response) {
            document.getElementById('response').innerText = "resp: " + response;
        }
        function getCookie() {
            var cookie = window.prompt("getCookie");
            document.getElementById('cookie').innerText = "cookie: " + cookie;
        }
        </script>
    </head>
    <body>
        <h3>功能按钮</h3>
        <button onclick = "login()" style = "font-size: 18px;">登录</button>
        <br> </br>
        <button class="btn" type="button" onclick="getCookie()">invokeOCGetCookie</button>
        <br> </br>
        <button onclick = "showConfirm()" style = "font-size: 18px;">confirm(message)</button>
        <br> </br>
        <button onclick = "showPrompt()" style = "font-size: 18px;">prompt(prompt, defaultText)</button>
        <h3>回调数据</h3>
        <div id="response">response's value</div>
        <br> </br>
        <div id="cookie">Cookie's value</div>
        <br> </br>
        <div id ="returnValue" style = "font-size: 18px; border: 1px dotted; height: 50px;"> </div>
    </body>
</html>

